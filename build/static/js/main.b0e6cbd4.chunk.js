(this["webpackJsonpschedule-app-front-end"]=this["webpackJsonpschedule-app-front-end"]||[]).push([[0],{103:function(e,t,n){},105:function(e,t,n){},140:function(e,t,n){e.exports=n(265)},145:function(e,t,n){},265:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(28),c=n.n(o),i=(n(145),n(103),n(6)),s=r.a.createContext({isAuth:null!==localStorage.getItem("refreshToken"),manager:!1}),l=r.a.createContext((function(e){console.log("shouldnt be here: ".concat(JSON.stringify(e)))}));function u(){return Object(a.useContext)(s)}function d(){return Object(a.useContext)(l)}var f=function(e){var t=Object(a.useState)({isAuth:!1,manager:!1}),n=Object(i.a)(t,2),o=n[0],c=n[1];return r.a.createElement(s.Provider,{value:o},r.a.createElement(l.Provider,{value:function(e){c(e)}},e.children))},m=n(4),h=n.n(m),p=n(10),v="http://localhost:8000",g=n(17),b=(n(105),n(8)),y=n(7);n(61);function E(){var e=Object(b.a)(['\nfont-family: "Montserrat", sans-serif;\nfont-size: 20px;\npadding:0;\n']);return E=function(){return e},e}var w=y.a.button(E()),O=function(){return console.log("hello"),r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav-list"},r.a.createElement("li",{id:"common",style:{marginRight:"auto"}},r.a.createElement(g.b,{to:"/"},r.a.createElement(w,{color:"primary"},"Home"))),r.a.createElement("li",null,r.a.createElement(g.b,{to:"/register/"},r.a.createElement(w,null,"Register"))),r.a.createElement("li",null,r.a.createElement(g.b,{to:"/login/"},r.a.createElement(w,null,"Login")))))},j=function(){return r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement("h1",null,"Home"))},x=n(33);function S(e){return k.apply(this,arguments)}function k(){return(k=Object(p.a)(h.a.mark((function e(t){var n,a,r,o,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:if(n=e.sent,a=n.refreshData,r=n.refreshStatus,console.log(localStorage.getItem("accessToken")),console.log("refresh status: ".concat(200===r,", ").concat(r)),200!==r){e.next=21;break}return e.next=10,fetch("".concat(v,"/api/").concat(t,"/"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"JWT ".concat(localStorage.getItem("accessToken"))},credentials:"include"});case 10:return o=e.sent,e.next=13,o.json();case 13:return c=e.sent,e.next=16,o.status;case 16:return i=e.sent,console.log("this is the response json: ".concat(JSON.stringify(c))),e.abrupt("return",{data:c,status:i});case 21:return e.abrupt("return",{data:a,status:r});case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return T.apply(this,arguments)}function T(){return(T=Object(p.a)(h.a.mark((function e(t,n){var a,r,o,c,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:if(a=e.sent,r=a.refreshData,200!==(o=a.refreshStatus)){e.next=19;break}return e.next=8,fetch("".concat(v,"/api/").concat(n,"/"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"JWT ".concat(localStorage.getItem("accessToken"))},body:JSON.stringify(t),credentials:"include"});case 8:return c=e.sent,e.next=11,c.json();case 11:return i=e.sent,e.next=14,c.status;case 14:return s=e.sent,console.log("this is the response ".concat(JSON.stringify(i))),e.abrupt("return",{data:i,status:s});case 19:return e.abrupt("return",{data:r,status:o});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return _.apply(this,arguments)}function _(){return(_=Object(p.a)(h.a.mark((function e(t,n){var a,r,o,c,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:if(a=e.sent,r=a.refreshData,200!==(o=a.refreshStatus)){e.next=20;break}return console.log("this is pk ".concat(t)),e.next=9,fetch("".concat(v,"/api/").concat(n,"/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"JWT ".concat(localStorage.getItem("accessToken"))},credentials:"include"});case 9:return c=e.sent,e.next=12,c.json();case 12:return i=e.sent,e.next=15,c.status;case 15:return s=e.sent,console.log("this is the response ".concat(JSON.stringify(i))),e.abrupt("return",{data:i,status:s});case 20:return e.abrupt("return",{data:r,status:o});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return N.apply(this,arguments)}function N(){return(N=Object(p.a)(h.a.mark((function e(){var t,n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={refresh:localStorage.getItem("refreshToken")},e.next=3,fetch("".concat(v,"/token/refresh/"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.next=9,n.status;case 9:return r=e.sent,localStorage.setItem("accessToken",a.access),localStorage.setItem("refreshToken",a.refresh),console.log("status: ".concat(r,", bool? ").concat(200===r)),e.abrupt("return",{refreshData:a,refreshStatus:r});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){var e=Object(b.a)(["\n    position: absolute;\n    zIndex: 10;\n    border - radius: 5px;\n    opacity: '0.9';\n    position: absolute; e\n    float: left\n    top: ",";\n    height: ",";\n    left: ",";\n    width: ",";\n    background-color: ","\n    box-shadow: ",";\n"]);return I=function(){return e},e}function P(){var e=Object(b.a)(["\n    // margin-right: 80vw;\n    // width: 20vw;\n    height: 100%;\n"]);return P=function(){return e},e}var A=y.a.div(P()),z=(y.a.div(I(),(function(e){return e.styledtop||50}),(function(e){return e.styledheight||50}),(function(e){return e.styledleft||50}),(function(e){return e.styledwidth||50}),(function(e){return e.styledhover?"#ffa384":"#74BDCB"}),(function(e){return e.styledhover?"2px 4px":""})),function(e){return r.a.createElement("div",{className:"time-block"},e.time)});function J(){var e=Object(b.a)(["\nposition: absolute;\nz-index: 1;\nborder-radius: 5px;\nopacity: 0.9;\ntop: ",";\nleft: ",";\nheight: ",";\nwidth:",";\ncursor: ",";\nbackground-color: #835b32;\n\nbox-shadow: 2px 4px;\n\n// transition: box-shadow 0.3s ease;\n"]);return J=function(){return e},e}var F=y.a.div(J(),(function(e){return e.divTop}),(function(e){return e.divLeft}),(function(e){return e.divHeight}),(function(e){return e.divWidth}),(function(e){return e.divCursorStyle})),W=function(e){var t=Object(a.useState)("grab"),n=Object(i.a)(t,2),o=n[0],c=n[1];var s={};return"undefined"!==typeof e.styles&&(s={top:"".concat(e.styles.top,"px"),height:"".concat(e.styles.height,"px"),left:"".concat(e.styles.left,"px"),width:"".concat(e.styles.width,"px")}),r.a.createElement("div",null,r.a.createElement(F,{onMouseMove:function(e){var t=e.clientY,n=e.target.getBoundingClientRect(),a=n.top,r=n.bottom;t<a+10||t>r-10?"n-resize"!==o&&c("n-resize"):"grab"!==o&&c("grab")},onMouseDown:function(t){if("n-resize"===o){var n=t.clientY;e.changeShiftTime(n,e.data)}else{var a=t.clientY;c("grabbing"),e.moveShift(a,e.data)}},onDoubleClick:function(){e.deleteShift(e.data.day,e.data.id)},divHeight:s.height,divTop:s.top,divLeft:s.left,divWidth:s.width,divCursorStyle:o},r.a.createElement("p",null,e.data.start_time," - ",e.data.end_time)))};function M(){var e=Object(b.a)(["\nposition: absolute;\nz-index: 1;\nborder-radius: 5px;\nopacity: 0.9;\ntop: ",";\nleft: ",";\nheight: ",";\nwidth:",";\nbackground-color: #74BDCB;\n&:hover{\n    background-color: #ffa384;\n    box-shadow: 2px 4px;\n\n}\ntransition: all 0.3s ease;\n"]);return M=function(){return e},e}var H=y.a.div(M(),(function(e){return e.divTop}),(function(e){return e.divLeft}),(function(e){return e.divHeight}),(function(e){return e.divWidth})),R=function(e){var t=n(68);var o=Object(a.useState)(!1),c=Object(i.a)(o,2),s=(c[0],c[1],e.timeRefs.current),l=(e.employee,Object(a.useState)([])),u=Object(i.a)(l,2),d=u[0],f=u[1],m={};function h(t,n,a){var r=p(t);if(r>=0){var o=s[r].dataset.time;o>n?e.changeShift(n,o,a,e.data.day):e.changeShift(o,n,a,e.data.day)}}function p(t){for(var n=-1,a=e.data.start_time,r=e.data.end_time,o=v(a),c=v(r),i=0;i<s.length;i++){t>s[i].getBoundingClientRect().top&&i<=c&&i>=o&&(n=i)}return n}function v(e){for(var t=0;t<s.length;t++)if(s[t].dataset.time===e)return t;return-1}function g(e,t){var n=p(e),a=s[n].dataset.time,r=t.start_time;function o(e){h(e.clientY,r,t.id)}a===t.start_time&&(r=t.end_time),document.addEventListener("mousemove",o),document.addEventListener("mouseup",(function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",o)}))}function b(t,n){var a=p(t);function r(t){var r=p(t.clientY)-a,o=v(n.start_time),c=v(n.end_time),i=e.data.start_time,l=e.data.end_time,u=v(i),d=v(l),f=o+r,m=c+r;if(f>=u&&m<=d){var h=s[f].dataset.time,g=s[m].dataset.time;e.changeShift(h,g,n.id,n.day),E()}}document.addEventListener("mousemove",r),document.addEventListener("mouseup",(function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",r)}))}function y(t){var n=t.start_time,a=t.end_time,r=v(n),o=v(a);if(r<0||o<0)return console.log("day ".concat(e.id," has no shifts to add or something went wrong!")),[];var c=s[r],i=s[o],l=c.offsetTop;return[l,i.offsetTop+i.offsetHeight-l,c.offsetLeft,c.offsetWidth]}function E(){var t=[];if(e.shifts.length>0)for(var n=0;n<e.shifts.length;n++){var a=y(e.shifts[n]),r=a[0],o={height:a[1],top:r,left:a[2],width:a[3]};t.push(o)}f(t)}return"undefined"!==typeof e.styles&&(m={top:"".concat(e.styles.top,"px"),height:"".concat(e.styles.height,"px"),left:"".concat(e.styles.left,"px"),width:"".concat(e.styles.width,"px")}),Object(a.useEffect)((function(){return E(),window.addEventListener("resize",E),function(){window.removeEventListener("resize",E)}}),[e.shifts]),r.a.createElement("div",null,r.a.createElement(H,{divHeight:m.height,divTop:m.top,divLeft:m.left,divWidth:m.width,onMouseDown:function(n){var a=t.generate(),r=n.clientY,o=s[p(r)];if(-1!==o){function c(e){h(e.clientY,i,a)}var i=o.dataset.time;e.createNewShift(i,i,a,e.data.day),E(),document.addEventListener("mousemove",c),document.addEventListener("mouseup",(function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",c)}))}}},r.a.createElement("p",null,e.data.start_time," - ",e.data.end_time)),e.shifts.map((function(t,n){return r.a.createElement(W,{key:n,data:t,styles:d[n],moveShift:b,changeShiftTime:g,deleteShift:e.deleteShift})})))},B=n(99);function Y(){var e=Object(b.a)(["\n    size:30px;\n    width: 100%;\n"]);return Y=function(){return e},e}function q(){var e=Object(b.a)(["\nheight: 30px;\nbackground-color:#74BDCB;\n\n"]);return q=function(){return e},e}function V(){var e=Object(b.a)(["\ndisplay: flex;\nmax-width: 100%;\nmargin: 10px 10px 10px 10px;\n"]);return V=function(){return e},e}function G(){var e=Object(b.a)(["\ndisplay: grid;\nwidth: 80vw;\nheight: auto;\ngrid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\nbox-sizing: border-box;\nborder-collapse: collapse;\n"]);return G=function(){return e},e}function K(){var e=Object(b.a)(["\nborder-left: 1px solid black;\ndisplay: grid;\ngrid-template-rows: auto;\nbox-sizing: border-box;\nborder-collapse: collapse;\ntransition: all 2s;\n"]);return K=function(){return e},e}var U=y.a.div(K()),$=y.a.div(G()),Q=y.a.div(V()),X=y.a.div(q()),Z=Object(y.a)(B.a)(Y()),ee=function(e){n(68);var t=Object(a.useRef)([]),o=Object(a.useState)([]),c=Object(i.a)(o,2),s=c[0],l=c[1];function u(e,t){for(var n=-1,a=0;a<t.length;a++)t[a]===e&&(n=a);return n}function d(n,a){var r=-1,o=-1;if(n.day===e.id&&(r=u(n.start_time,a),o=u(n.end_time,a)),r<0||o<0)return console.log("day ".concat(e.id," has no shifts to add or something went wrong!")),[];var c=t.current[r],i=t.current[o],s=c.offsetTop;return[s,i.offsetTop+i.offsetHeight-s,c.offsetLeft,c.offsetWidth]}function f(){var t=[];if(e.availabilities.length>0)for(var n=0;n<e.availabilities.length;n++){var a=d(e.availabilities[n],m),r=a[0],o={height:a[1],top:r,left:a[2],width:a[3]};t.push(o)}l(t)}var m=e.timesArr;return Object(a.useEffect)((function(){return f(),window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}),[e.availabilities]),r.a.createElement("div",{className:"day-block"},r.a.createElement(X,null,r.a.createElement("p",null,e.day,": ",r.a.createElement("strong",null,e.weekDate))),m.map((function(n,a){return r.a.createElement("div",{key:a,"data-day":e.day,"data-time":n,ref:function(e){t.current[a]=e}},r.a.createElement(z,{id:a,time:n}))})),e.availabilities.map((function(n,a){return r.a.createElement(R,{employee:e.employee,shifts:e.shifts,key:a,data:n,styles:s[a],timeRefs:t,createNewShift:e.createNewShift,changeShift:e.changeShift,deleteShift:e.deleteShift})})))},te=n(266),ne=n(269),ae=r.a.createContext(!1),re=function(){Object(a.useEffect)((function(){console.log("local storage: ".concat(localStorage.getItem("accessToken")))}),[]);var e=new Date,t=e.getDate()-e.getDay()+7,n=Object(a.useState)(!1),o=Object(i.a)(n,2),c=o[0],s=o[1],l=Object(a.useState)([[],[],[],[],[],[],[]]),u=Object(i.a)(l,2),d=u[0],f=u[1],m=Object(a.useState)([{day:"Sunday",start:"12:00",end:"23:00",id:0},{day:"Monday",start:"12:00",end:"23:00",id:1},{day:"Tuesday",start:"12:00",end:"23:00",id:2},{day:"Wednesday",start:"12:00",end:"23:00",id:3},{day:"Thursday",start:"12:00",end:"23:00",id:4},{day:"Friday",start:"12:00",end:"23:00",id:5},{day:"Saturday",start:"12:00",end:"23:00",id:6}]),v=Object(i.a)(m,2),g=v[0];v[1];function b(){return(b=Object(p.a)(h.a.mark((function e(){var t,n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.flat(),console.log("this is data: ".concat(JSON.stringify(t))),e.next=4,C(t,"availability");case 4:n=e.sent,a=n.data,201===(r=n.status)?s(!0):console.log("avail status: ".concat(r)),console.log("postDAta: ".concat(JSON.stringify(a),", post status: ").concat(r));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,n,a){console.log("TYPE: ".concat(d," "));for(var r=Object(x.a)(d),o=0;o<r.length;o++)r[o]=d[o];var c={day:e,start_time:t,end_time:n,id:a};r[e].push(c),f(r),s(!1)}function E(e,t){for(var n=Object(x.a)(d),a=0;a<n.length;a++)n[a]=Object(x.a)(d[a]);for(var r=0;r<n[e].length;r++)n[e][r].id===t&&n[e].splice(r,1);f(n),s(!1)}function w(e,t,n,a){var r=Object(x.a)(d);console.log("prev state: ".concat(r));var o=r[e],c=o.findIndex((function(e){return e.id===t})),i={day:e,start_time:n,end_time:a,id:t};o[c]=i,f(r),s(!1)}Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(h.a.mark((function e(){var t,n,a,r,o,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("availability");case 2:if(t=e.sent,n=t.data,200===t.status){for(a=Object(x.a)(d),r=0;r<a.length;r++)a[r]=Object(x.a)(d[r]);for(o=0;o<n.length;o++)c=n[o],a[c.day].push(c);f(a)}case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var O=Object(a.useMemo)((function(){return ie(g[0].start,g[0].end,30)}),[g[0].start,g[0].end]);return r.a.createElement("div",null,r.a.createElement(Q,null,r.a.createElement(ae.Provider,{value:c},r.a.createElement($,null,g.map((function(e,n){return r.a.createElement(U,{color:"primary",key:n},r.a.createElement(ce,{weekDate:t+n,day:e.day,start:e.start,end:e.end,id:e.id,shifts:d[n],timesArr:O,handleCreateShift:y,changeShift:w,handleDeleteShift:E}))}))))),r.a.createElement(Z,{onClick:function(){return b.apply(this,arguments)}},"Submit"))},oe=function(e){var t=Object(a.useState)("grab"),n=Object(i.a)(t,2),o=n[0],c=n[1],s=Object(a.useState)(!1),l=Object(i.a)(s,2),u=(l[0],l[1],Object(a.useState)(!1)),d=Object(i.a)(u,2),f=(d[0],d[1],Object(a.useContext)(ae));console.log("this is submitted: ".concat(f));var m={height:0,zIndex:10,backgroundColor:"purple",overflow:"hidden",borderRadius:"50px"};return"undefined"!==typeof e.styles&&(m={position:"absolute",top:"".concat(e.styles.top,"px"),height:"".concat(e.styles.height,"px"),left:"".concat(e.styles.left,"px"),width:"".concat(e.styles.width,"px"),zIndex:1,backgroundColor:"#74BDCB",cursor:o,borderRadius:"5px",boxShadow:f?"":"2px 4px",opacity:"0.9"}),r.a.createElement("div",{onMouseMove:function(e){var t=e.clientY,n=e.target.getBoundingClientRect(),a=n.top,r=n.bottom;t<a+10||t>r-10?"n-resize"!==o&&c("n-resize"):"grab"!==o&&c("grab")},onMouseDown:function(t){if("n-resize"===o){var n=t.clientY;e.changeShiftTime(n,e.data)}else{var a=t.clientY;c("grabbing"),e.moveShift(a,e.data)}},onMouseUp:function(){"grabbing"===o&&c("grab")},style:m,className:"shift-block",onDoubleClick:function(){e.handleDeleteShift(e.data.day,e.data.id)}},r.a.createElement("p",null,e.data.start_time," - ",e.data.end_time))},ce=function(e){var t=n(68);var o=Object(a.useRef)([]),c=Object(a.useState)([]),s=Object(i.a)(c,2),l=s[0],u=s[1];function d(t,n,a){var r=f(t);if(r>=0){var o=b[r];o>n?e.changeShift(e.id,a,n,o):e.changeShift(e.id,a,o,n),g()}}function f(e){for(var t=-1,n=0;n<o.current.length;n++){e>o.current[n].getBoundingClientRect().top&&(t=n)}return t}function m(e,t){for(var n=-1,a=0;a<t.length;a++)t[a]===e&&(n=a);return n}function h(e,t){var n=f(e),a=b[n],r=t.start_time;function o(e){d(e.clientY,r,t.id)}a===t.start_time&&(r=t.end_time),document.addEventListener("mousemove",o),document.addEventListener("mouseup",(function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",o)}))}function p(t,n){var a=f(t);function r(t){var r=f(t.clientY)-a,o=m(n.start_time,b)+r,c=m(n.end_time,b)+r;o>=0&&c<=b.length-1&&(e.changeShift(e.id,n.id,b[o],b[c]),g())}document.addEventListener("mousemove",r),document.addEventListener("mouseup",(function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",r)}))}function v(t,n){var a=-1,r=-1;if(t.day===e.id&&(a=m(t.start_time,n),r=m(t.end_time,n)),a<0||r<0)return console.log("day ".concat(e.id," has no shifts to add or something went wrong!")),[];var c=o.current[a],i=o.current[r],s=c.offsetTop;return[s,i.offsetTop+i.offsetHeight-s,c.offsetLeft,c.offsetWidth]}function g(){var t=[];if(e.shifts.length>0)for(var n=0;n<e.shifts.length;n++){var a=v(e.shifts[n],b),r=a[0],o={height:a[1],top:r,left:a[2],width:a[3]};t.push(o)}u(t)}var b=e.timesArr;return Object(a.useEffect)((function(){return g(e.shifts),window.addEventListener("resize",g),console.log("HEHO"),function(){window.removeEventListener("resize",g)}}),[e.shifts]),r.a.createElement("div",{onMouseDown:function(n){var a=n.clientY,r=t.generate(),o=f(a);if("time-block"!==n.target.className)console.log("didnt click on a time slot");else{function c(e){d(e.clientY,b[o],r)}e.handleCreateShift(e.id,b[o],b[o],r),g(),document.addEventListener("mousemove",c),document.addEventListener("mouseup",(function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",c)}))}},className:"day-block"},r.a.createElement(X,null,r.a.createElement("p",null,e.day,": ",r.a.createElement("strong",null,e.weekDate))),b.map((function(t,n){return r.a.createElement("div",{key:n,"data-day":e.day,"data-time":t,ref:function(e){o.current[n]=e}},r.a.createElement(z,{id:n,mouseDown:e.mouseDown,time:t,day:e.id}))})),e.shifts.map((function(t,n){return r.a.createElement(oe,{key:n,data:t,styles:l[n],changeShiftTime:h,moveShift:p,handleDeleteShift:e.handleDeleteShift})})))};function ie(e,t,n){console.log("i am re-rendering");for(var a=e.split(":").map((function(e){return parseInt(e)})),r=t.split(":").map((function(e){return parseInt(e)})),o=[],c=n,i=60/c,s=(r[0]-a[0])*i+(r[1]-a[1])/c+1,l=-1,u=-c,d=0;d<s;d++){d%i===0?(l++,u=0):u+=c;var f=a[0]+l,m=a[1]+u;0===m&&(m="00"),o.push("".concat(f,":").concat(m))}return console.log("time array: ".concat(o)),o}var se=te.a.Sider,le=te.a.Content,ue=function(){var e=new Date,t=e.getDate()-e.getDay()+7,n=Object(a.useState)([]),o=Object(i.a)(n,2),c=o[0],s=o[1],l=Object(a.useState)([{day:"Sunday",start:"12:00",end:"23:00",id:0},{day:"Monday",start:"12:00",end:"23:00",id:1},{day:"Tuesday",start:"12:00",end:"23:00",id:2},{day:"Wednesday",start:"12:00",end:"23:00",id:3},{day:"Thursday",start:"12:00",end:"23:00",id:4},{day:"Friday",start:"12:00",end:"23:00",id:5},{day:"Saturday",start:"12:00",end:"23:00",id:6}]),u=Object(i.a)(l,2),d=u[0],f=(u[1],Object(a.useState)([[],[],[],[],[],[],[]])),m=Object(i.a)(f,2),v=m[0],g=m[1],b=Object(a.useState)([[],[],[],[],[],[],[]]),y=Object(i.a)(b,2),E=y[0],w=y[1],O=Object(a.useState)(-1),j=Object(i.a)(O,2),k=j[0],T=j[1];function L(){return(L=Object(p.a)(h.a.mark((function e(){var t,n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={shifts:E.flat(),employeeID:k},e.next=3,C(t,"shifts");case 3:n=e.sent,a=n.data,r=n.status,console.log("data: ".concat(a,", status: ").concat(r)),_();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("employeeDataList");case 2:t=e.sent,n=t.data,200===t.status&&s(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){_()}),[]);var N=Object(a.useMemo)((function(){return ie(d[0].start,d[0].end,30)}),[d[0].start,d[0].end]);function I(e,t){for(var n=0;n<c.length;n++)if(parseInt(c[n].id)===parseInt(e))return console.log("i have made it"),console.log(Object.keys(c[n])),c[n][t];return[]}function P(e,t,n,a){parseInt(a);for(var r=Object(x.a)(E),o=0;o<E.length;o++)r[o]=E[o];var c={start_time:e,end_time:t,id:n,day:a};r[a].push(c),w(r)}function z(e,t){for(var n=Object(x.a)(E),a=0;a<n.length;a++)n[a]=Object(x.a)(E[a]);for(var r=0;r<n[e].length;r++)n[e][r].id===t&&n[e].splice(r,1);w(n)}function J(e,t,n,a){for(var r=Object(x.a)(E),o=0;o<E.length;o++)r[o]=Object(x.a)(E[o]);r[a];var c=r[a].findIndex((function(e){return e.id===n})),i={start_time:e,end_time:t,id:n,day:a};r[a][c]=i,w(r)}return r.a.createElement(te.a,null,r.a.createElement(se,null,r.a.createElement(A,null,r.a.createElement(ne.a,{onClick:function(e){e.item;var t=e.key,n=(e.keyPath,e.selectedKeys,e.domEvent,I(t,"week_availabilities"));console.log("here are avail: ".concat(n));for(var a=[[],[],[],[],[],[],[]],r=0;r<n.length;r++){var o=n[r];a[o.day].push(o)}for(var c=I(t,"week_shifts"),i=[[],[],[],[],[],[],[]],s=0;s<c.length;s++){var l=c[s];i[l.day].push(l)}w(i),g(a),T(t)},theme:"dark",mode:"vertical"},c.map((function(e){return r.a.createElement(ne.a.Item,{key:e.id},e.name)})))),r.a.createElement(B.a,{onClick:function(){return L.apply(this,arguments)}},"Submit ")),r.a.createElement(le,null,r.a.createElement($,null,d.map((function(e,n){return r.a.createElement(U,{key:n+10},r.a.createElement(ee,{weekDate:t+n,employee:k,day:e.day,start:e.start,end:e.end,availabilities:v[n],shifts:E[n],timesArr:N,id:e.id,createNewShift:P,changeShift:J,deleteShift:z}))})))))};function de(){var e=Object(b.a)(["\nposition: absolute;\nz-index: 1;\nborder-radius: 5px;\nopacity: 0.9;\ntop: ",";\nleft: ",";\nheight: ",";\nwidth:",";\nbackground-color: ",";\n\nbox-shadow: ",";\n\n"]);return de=function(){return e},e}var fe=y.a.div(de(),(function(e){return e.divTop}),(function(e){return e.divLeft}),(function(e){return e.divHeight}),(function(e){return e.divWidth}),(function(e){return e.divColor}),(function(e){return e.selected?"3px 6px":""})),me=function(e){var t={};return"undefined"!==typeof e.styles&&(t={top:"".concat(e.styles.top,"px"),height:"".concat(e.styles.height,"px"),left:"".concat(e.styles.left,"px"),width:"".concat(e.styles.width,"px"),selected:e.data.selected,color:"".concat(e.data.color)}),console.log(e.data.selected),r.a.createElement("div",null,r.a.createElement(fe,{divHeight:t.height,divTop:t.top,divLeft:t.left,divWidth:t.width,onClick:function(){e.handleOnClick(e.data.staff_id)},selected:t.selected,divColor:t.color}))};function he(){var e=Object(b.a)(["\nheight: 30px;\nbackground-color:#74BDCB;\n"]);return he=function(){return e},e}var pe=Object(y.a)(B.a)(he()),ve=function(e){n(68);var t=Object(a.useRef)([]),o=Object(a.useState)([]),c=Object(i.a)(o,2),s=c[0],l=c[1];function u(e,t){for(var n=-1,a=0;a<t.length;a++)t[a]===e&&(n=a);return n}function d(n,a){var r=-1,o=-1;if(n.day===e.id&&(r=u(n.start_time,a),o=u(n.end_time,a)),r<0||o<0)return console.log("day ".concat(e.id," has no shifts to add or something went wrong!")),[];var c=t.current[r],i=t.current[o],s=c.offsetTop;return[s,i.offsetTop+i.offsetHeight-s,c.offsetLeft,c.offsetWidth]}function f(){var t=[];if(e.shifts.length>0)for(var n=0,a=0;a<e.shifts.length;a++){var r=d(e.shifts[a],m),o=r[0],c=r[1],i=r[3]/e.shifts.length;0===n?n=r[2]:n+=i;var s={height:c,top:o,left:n,width:i};t.push(s)}l(t)}var m=e.timesArr;return Object(a.useEffect)((function(){return f(),window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}),[e.shifts]),r.a.createElement("div",{className:"day-block"},r.a.createElement(pe,{onClick:function(){console.log("HELLOOOO")}},e.day,": ",r.a.createElement("strong",null,e.weekDate)),m.map((function(n,a){return r.a.createElement("div",{key:a,"data-day":e.day,"data-time":n,ref:function(e){t.current[a]=e}},r.a.createElement(z,{id:a,time:n}))})),e.shifts.map((function(t,n){return r.a.createElement(me,{key:n,data:t,styles:s[n],handleOnClick:e.handleOnClick})})))},ge=n(267);function be(){var e=Object(b.a)(["\n    box-shadow: ",";\n    border-color: ",";\n    &:hover{\n        border-color: ",";\n        color: ",";\n        box-shadow: 2px 4px ",";\n    }\n"]);return be=function(){return e},e}var ye=Object(y.a)(B.a)(be(),(function(e){return e.selected?"2px 4px":""}),(function(e){return e.divColor}),(function(e){return e.divColor}),(function(e){return e.divColor}),(function(e){return e.divColor})),Ee=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,{divColor:e.divColor,selected:e.selected,onClick:function(){e.handleOnClick(e.id)}},e.name),r.a.createElement(ge.a,null))};function we(){var e=Object(b.a)(["\n"]);return we=function(){return e},e}function Oe(){var e=Object(b.a)(["\n    background-color: #fff;\n"]);return Oe=function(){return e},e}function je(){var e=Object(b.a)(["\n    background-color: #fff;\n"]);return je=function(){return e},e}var xe=te.a.Sider,Se=te.a.Content,ke=Object(y.a)(xe)(je()),Ce=Object(y.a)(te.a)(Oe()),Te=(Object(y.a)(B.a)(we()),function(){var e=Object(a.useState)([{day:"Sunday",start:"12:00",end:"23:00",id:0},{day:"Monday",start:"12:00",end:"23:00",id:1},{day:"Tuesday",start:"12:00",end:"23:00",id:2},{day:"Wednesday",start:"12:00",end:"23:00",id:3},{day:"Thursday",start:"12:00",end:"23:00",id:4},{day:"Friday",start:"12:00",end:"23:00",id:5},{day:"Saturday",start:"12:00",end:"23:00",id:6}]),t=Object(i.a)(e,2),n=t[0],o=(t[1],new Date),c=o.getDate()-o.getDay()+7,s=["#ffd3ae","#ff6842","#835b32","#00d8c8","#194b4a","#f9b7d4","#d26060","#1bd0b0","#4d3e47"],l=Object(a.useState)([[],[],[],[],[],[],[]]),u=Object(i.a)(l,2),d=u[0],f=u[1],m=Object(a.useState)([]),v=Object(i.a)(m,2),g=v[0],b=v[1],y=Object(a.useMemo)((function(){return ie(n[0].start,n[0].end,30)}),[n[0].start,n[0].end]);function E(){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("shifts");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){var t=g.map((function(t){return t.id===e?t.selected=!0:t.selected=!1,t}));b(t)}function j(){return(j=Object(p.a)(h.a.mark((function e(){var t,n,a,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:for(t=e.sent,n=t.data,a=t.status,r=0;r<n.length;r++)n[r].selected=!1,o=r%s.length,n[r].color=s[o];200===a&&b(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){j.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){for(var e=[[],[],[],[],[],[],[]],t=0;t<g.length;t++)for(var n=0;n<g[t].week_shifts.length;n++){console.log("hello");var a={name:g[t].name,day:g[t].week_shifts[n].day,start_time:g[t].week_shifts[n].start_time,end_time:g[t].week_shifts[n].end_time,id:g[t].week_shifts[n].id,staff_id:g[t].id,selected:g[t].selected,color:g[t].color};e[g[t].week_shifts[n].day].push(a)}f(e)}),[g]),r.a.createElement(Ce,null,r.a.createElement(ke,null,g.map((function(e){return r.a.createElement(Ee,{selected:e.selected,id:e.id,key:e.id,name:e.name,handleOnClick:O,divColor:e.color})}))),r.a.createElement(Se,null,r.a.createElement($,null,n.map((function(e,t){return r.a.createElement(U,{key:"d".concat(t)},r.a.createElement(ve,{day:e.day,weekDate:c+t,start:e.start,end:e.end,shifts:d[t],timesArr:y,id:e.id,handleOnClick:O}))})))))}),Le=function(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],o=t[1];function c(){return(c=Object(p.a)(h.a.mark((function e(){var t,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("am i being called?"),e.next=3,S("employee");case 3:t=e.sent,n=t.data,a=t.status,console.log("this is data: ".concat(JSON.stringify(n),", this is status: ").concat(a)),200===a?(console.log("this is data: ".concat(JSON.stringify(n))),o(n)):(console.log("not 200"),console.log("status: ".concat(a)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){console.log("use effect"),function(){c.apply(this,arguments)}()}),[]),r.a.createElement("div",null,r.a.createElement("h3",null,"name: ",n.name),r.a.createElement(ge.a,null),r.a.createElement("h3",null,"email: ",n.email))},_e=n(268),De=n(270),Ne=function(e){return console.log("this is data: ".concat(JSON.stringify(e.data))),r.a.createElement("div",null,r.a.createElement("h1",null,e.data.name),r.a.createElement(ge.a,null))};function Ie(){var e=Object(b.a)(["\n    position: absolute;\n    right:0px;\n    margin-left: auto;\n    padding: 5px;\n    display: inline-block;\n"]);return Ie=function(){return e},e}function Pe(){var e=Object(b.a)(["\n    position: relative;\n"]);return Pe=function(){return e},e}var Ae=y.a.div(Pe()),ze=Object(y.a)(B.a)(Ie()),Je=function(e){return r.a.createElement(Ae,null,r.a.createElement("h1",{style:{display:"inline-block"}},e.data.name),r.a.createElement(ze,{onClick:function(){e.delete(e.data.id)}},"Remove"),r.a.createElement(ge.a,null))};function Fe(){var e=Object(b.a)(["\n    background-color: #fff;\n    padding-right: 10%;\n\n"]);return Fe=function(){return e},e}function We(){var e=Object(b.a)(["\n    height:100vh;\n    background-color: #fff;\n"]);return We=function(){return e},e}var Me=te.a.Content,He=te.a.Sider,Re=Object(y.a)(He)(We()),Be=Object(y.a)(Me)(Fe()),Ye=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)([]),s=Object(i.a)(c,2),l=s[0],u=s[1];localStorage.getItem("access");function d(){return(d=Object(p.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("email ".concat(JSON.stringify(t))),console.log("hello"),n={email:t.email,name:t.name},e.next=5,C(n,"employee-list");case 5:a=e.sent,a.data,201===a.status&&v();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return m.apply(this,arguments)}function m(){return(m=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{id:t},e.next=3,L(t,"employee");case 3:n=e.sent,n.data,200===n.status&&v();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(h.a.mark((function e(){var t,n,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("employee-list");case 2:t=e.sent,n=t.data,a=t.status,console.log("data: ".concat(JSON.stringify(n),", status: ").concat(a)),r=n.confirmed,c=n.pending,u(r),o(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){v()}),[]),r.a.createElement(te.a,null,r.a.createElement(Re,null,r.a.createElement("h1",null,"Confirmed Employees:"),r.a.createElement(ge.a,null),l.map((function(e){return r.a.createElement(Ne,{delete:f,data:e})}))),r.a.createElement(Be,null,r.a.createElement("h1",null,"Pending Employees:"),r.a.createElement(ge.a,null),n.map((function(e){return r.a.createElement(Je,{delete:f,data:e})})),r.a.createElement(_e.a,{onFinish:function(e){return d.apply(this,arguments)}},r.a.createElement(_e.a.Item,{label:"email",name:"email",rules:[{required:!0,message:"Please enter a valid email address"},{type:"email"}]},r.a.createElement(De.a,null)),r.a.createElement(_e.a.Item,{label:"name",name:"name",rules:[{required:!0,message:"Please enter a name!"}]},r.a.createElement(De.a,null)),r.a.createElement(B.a,{htmlType:"submit"},"Add Employee"))))},qe=n(20),Ve=function(){var e=d();var t=Object(qe.h)();return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav-list"},r.a.createElement("li",{style:{marginRight:"auto"}},r.a.createElement(g.b,{to:"".concat(t.url,"/Profile")},r.a.createElement(w,{color:"primary"},"View Profile"))),r.a.createElement("li",{className:"nav-element"},r.a.createElement(g.b,{to:"".concat(t.url,"/add-employees")},r.a.createElement(w,{color:"primary"},"Add Employees"))),r.a.createElement("li",{className:"nav-element"},r.a.createElement(g.b,{to:"".concat(t.url,"/Shifts")},r.a.createElement(w,{color:"primary"},"Set Shifts"))),r.a.createElement("li",{className:"nav-element"},r.a.createElement(g.b,{to:"".concat(t.url,"/Schedule")},r.a.createElement(w,{color:"primary"},"View Schedule"))),r.a.createElement("li",{className:"nav-element"},r.a.createElement(g.b,{to:""},r.a.createElement(w,{color:"primary",onClick:function(){localStorage.clear(),e({isAuth:!1,manager:!1})}},"Logout")))))),r.a.createElement(qe.d,null,r.a.createElement(qe.b,{path:"".concat(t.path,"/Profile")},r.a.createElement(Le,null)),r.a.createElement(qe.b,{path:"".concat(t.path,"/add-employees")},r.a.createElement(Ye,null)),r.a.createElement(qe.b,{path:"".concat(t.path,"/Shifts")},r.a.createElement(ue,null)),r.a.createElement(qe.b,{path:"".concat(t.path,"/Schedule")},r.a.createElement(Te,null))))};function Ge(){var e=Object(b.a)(["\nposition: absolute;\nz-index: 2;\nborder-radius: 5px;\nopacity: 0.9;\ntop: ",";\nleft: ",";\nheight: ",";\nwidth:",";\nbackground-color: ",";\n\n\n"]);return Ge=function(){return e},e}var Ke=y.a.div(Ge(),(function(e){return e.divTop}),(function(e){return e.divLeft}),(function(e){return e.divHeight}),(function(e){return e.divWidth}),"#ff6969"),Ue=function(e){console.log("these are the props for shift block: ".concat(JSON.stringify(e)));var t={};return"undefined"!==typeof e.styles&&(t={top:"".concat(e.styles.top,"px"),height:"".concat(e.styles.height,"px"),left:"".concat(e.styles.left,"px"),width:"".concat(e.styles.width,"px"),color:"".concat(e.data.color)}),r.a.createElement("div",null,r.a.createElement(Ke,{divHeight:t.height,divTop:t.top,divLeft:t.left,divWidth:t.width,divColor:t.color},e.data.start_time," - ",e.data.end_time))},$e=function(e){n(68);console.log("this is the shift passed to day: ".concat(JSON.stringify(e.shifts)));var t=Object(a.useRef)([]),o=Object(a.useState)([]),c=Object(i.a)(o,2),s=c[0],l=c[1],u=new Date;u.getDate(),u.getDay();function d(e,t){for(var n=-1,a=0;a<t.length;a++)t[a]===e&&(n=a);return n}function f(n,a){var r=-1,o=-1;if(n.day===e.id&&(r=d(n.start_time,a),o=d(n.end_time,a)),r<0||o<0)return console.log("day ".concat(e.id," has no shifts to add or something went wrong!")),[];var c=t.current[r],i=t.current[o],s=c.offsetTop;return[s,i.offsetTop+i.offsetHeight-s,c.offsetLeft,c.offsetWidth]}function m(){var t=[];if(e.shifts.length>0)for(var n=0;n<e.shifts.length;n++){var a=f(e.shifts[n],h),r=a[0],o={height:a[1],top:r,left:a[2],width:a[3]};t.push(o)}l(t)}var h=e.timesArr;return Object(a.useEffect)((function(){return m(e.shifts),window.addEventListener("resize",m),function(){window.removeEventListener("resize",m)}}),[e.shifts]),r.a.createElement("div",{className:"day-block"},r.a.createElement(X,null,r.a.createElement("p",null,e.day,": ",r.a.createElement("strong",null,e.weekDate))),h.map((function(n,a){return r.a.createElement("div",{key:a,"data-day":e.day,"data-time":n,ref:function(e){t.current[a]=e}},r.a.createElement(z,{id:a,time:n}))})),e.shifts.map((function(e,t){return r.a.createElement(Ue,{key:t,data:e,styles:s[t]})})))},Qe=function(e){var t=new Date,n=t.getDate()-t.getDay()+7,o=Object(a.useState)([{day:"Sunday",start:"12:00",end:"23:00",id:0},{day:"Monday",start:"12:00",end:"23:00",id:1},{day:"Tuesday",start:"12:00",end:"23:00",id:2},{day:"Wednesday",start:"12:00",end:"23:00",id:3},{day:"Thursday",start:"12:00",end:"23:00",id:4},{day:"Friday",start:"12:00",end:"23:00",id:5},{day:"Saturday",start:"12:00",end:"23:00",id:6}]),c=Object(i.a)(o,2),s=c[0];c[1];console.log("this is the passed shifts: ".concat(e.shifts));var l=Object(a.useMemo)((function(){return ie(s[0].start,s[0].end,30)}),[s[0].start,s[0].end]);return r.a.createElement($,null,s.map((function(t,a){return r.a.createElement(U,{key:a+10},r.a.createElement($e,{day:t.day,weekDate:n+a,start:t.start,end:t.end,shifts:e.shifts[a],timesArr:l,id:t.id}))})))},Xe=function(){var e=Object(a.useState)([[],[],[],[],[],[],[]]),t=Object(i.a)(e,2),n=t[0],o=t[1];function c(){return(c=Object(p.a)(h.a.mark((function e(){var t,a,r,c,i,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("view-shifts");case 2:if(t=e.sent,a=t.data,r=t.status,console.log("data: ".concat(JSON.stringify(a),", status: ").concat(r)),200===r){for(c=Object(x.a)(n),i=0;i<c.length;i++)c[i]=Object(x.a)(n[i]);for(s=0;s<a.length;s++)l=a[s],c[l.day].push(l);console.log("this is new shift array: ".concat(c)),o(c)}case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){c.apply(this,arguments)}()}),[]),r.a.createElement(Qe,{shifts:n})},Ze=function(){var e=d();var t=Object(qe.h)();return console.log("match url: ".concat(t.url)),r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav-list"},r.a.createElement("li",{style:{marginRight:"auto"}},r.a.createElement(g.b,{to:"".concat(t.url,"/Profile")},r.a.createElement(w,{color:"primary"},"View Profile"))),r.a.createElement("li",{className:"nav-element"},r.a.createElement(g.b,{to:"".concat(t.url,"/Availability")},r.a.createElement(w,{color:"primary"},"Give Availability"))),r.a.createElement("li",{className:"nav-element"},r.a.createElement(g.b,{to:"".concat(t.url,"/Schedule")},r.a.createElement(w,{color:"primary"},"View Schedule"))),r.a.createElement("li",{className:"nav-element"},r.a.createElement(g.b,{to:""},r.a.createElement(w,{color:"primary",onClick:function(){localStorage.clear(),e({isAuth:!1,manager:!1})}},"Logout")))))),r.a.createElement(qe.d,null,r.a.createElement(qe.b,{path:"".concat(t.path,"/Profile")},r.a.createElement(Le,null)),r.a.createElement(qe.b,{path:"".concat(t.path,"/Availability")},r.a.createElement(re,null)),r.a.createElement(qe.b,{path:"".concat(t.path,"/Schedule")},r.a.createElement(Xe,null))))};function et(){var e=Object(b.a)(["\n    width:100%;\n    height:100%;\n    background-color: #fff;\n"]);return et=function(){return e},e}function tt(){var e=Object(b.a)(["\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    height: 80vh;\n    width: 33vw;\n    // border-radius: 10px;\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    padding: 5%;\n    // z-index:-1;\n    background-color: #f8f8ff;\n    overflow-y: scroll;\n    transform: translate(-50%, -50%)\n\n"]);return tt=function(){return e},e}var nt=y.a.div(tt()),at=y.a.div(et());function rt(e,t,n){return ot.apply(this,arguments)}function ot(){return(ot=Object(p.a)(h.a.mark((function e(t,n,a){var r,o,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={email:t,password:n},e.next=3,fetch("".concat(v,"/token/myobtain/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),signal:a.signal});case 3:return o=e.sent,e.next=6,o.json();case 6:return c=e.sent,e.next=9,o.status;case 9:return i=e.sent,e.abrupt("return",{data:c,status:i});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e){return it.apply(this,arguments)}function it(){return(it=Object(p.a)(h.a.mark((function e(t){var n,a,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={email:t.email,name:t.name,password:t.password,store:t.store,location:t.location},e.next=3,fetch("".concat(v,"/register/manager/"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,e.next=9,a.status;case 9:return o=e.sent,console.log("status: ".concat(o)),console.log("response: ".concat(JSON.stringify(r))),e.abrupt("return",{data:r,status:o});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e,t){return lt.apply(this,arguments)}function lt(){return(lt=Object(p.a)(h.a.mark((function e(t,n){var a,r,o,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,console.log("jwt: ".concat(a)),r={password:n.password},e.next=5,fetch("".concat(v,"/reset-password/"),{method:"POST",headers:{"Content-type":"application/json",Authorization:"JWT ".concat(a)},credentials:"include",body:JSON.stringify(r)});case 5:return o=e.sent,e.next=8,o.json();case 8:return c=e.sent,e.next=11,o.status;case 11:return i=e.sent,e.abrupt("return",{data:c,status:i});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut={labelCol:{sm:{span:24},lg:{span:24},xl:{span:24},xxl:{span:8}},wrapperCol:{sm:{span:24},lg:{span:24},xl:{span:24},xxl:{span:16}}},dt={wrapperCol:{offset:8,span:16}},ft=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),o=n[0],c=n[1],s=r.a.createElement(qe.a,{to:"/login"});function l(){return(l=Object(p.a)(h.a.mark((function e(t){var n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Success:",t),e.next=3,ct(t);case 3:n=e.sent,a=n.status,r=n.data,console.log("this is status: ".concat(a,", this is data:").concat(JSON.stringify(r))),201===a&&c(!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o?s:r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Register"),r.a.createElement(_e.a,Object.assign({},ut,{name:"basic",initialValues:{remember:!0},onFinish:function(e){return l.apply(this,arguments)},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(_e.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input a valid email",type:"email"}]},r.a.createElement(De.a,null)),r.a.createElement(_e.a.Item,{label:"name",name:"name",rules:[{required:!0,message:"Please input your name!"}]},r.a.createElement(De.a,null)),r.a.createElement(_e.a.Item,{label:"Password",name:"password",hasFeedback:!0,rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(De.a.Password,null)),r.a.createElement(_e.a.Item,{label:"Confirm password",name:"Confirm password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please input your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(De.a.Password,null)),r.a.createElement(_e.a.Item,{label:"Store",name:"store",rules:[{required:!0,message:"Please input the name of your store!"}]},r.a.createElement(De.a,null)),r.a.createElement(_e.a.Item,{label:"Location",name:"location",rules:[{required:!0,message:"Please input the location of your store!"}]},r.a.createElement(De.a,null)),r.a.createElement(_e.a.Item,dt,r.a.createElement(B.a,{type:"primary",htmlType:"submit"},"Submit"))))},mt=function(){return r.a.createElement(at,null,r.a.createElement(O,null),r.a.createElement(nt,null,r.a.createElement(ft,{position:"manager"})))},ht={labelCol:{span:24},wrapperCol:{span:24}},pt={wrapperCol:{offset:8,span:16}},vt=function(){var e=Object(a.useState)({loggedIn:!1,isManager:!1}),t=Object(i.a)(e,2),n=(t[0],t[1],u()),o=d(),c=Object(a.useState)([]),s=Object(i.a)(c,2),l=(s[0],s[1]),f=new AbortController;function m(){return(m=Object(p.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l([t.email,t.password]),e.next=3,rt(t.email,t.password,f);case 3:n=e.sent,a=n.data,200!==n.status?console.log("error: ".concat(JSON.stringify(a))):(localStorage.setItem("accessToken",a.access),localStorage.setItem("refreshToken",a.refresh),o({isAuth:!0,manager:a.manager}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.isAuth&&!n.manager?r.a.createElement(qe.a,{to:"/employee"}):n.isAuth&&n.manager?r.a.createElement(qe.a,{to:"/manager"}):r.a.createElement(at,null,r.a.createElement(O,null),r.a.createElement(nt,null,r.a.createElement("h3",null,"Login"),r.a.createElement(_e.a,Object.assign({},ht,{name:"basic",initialValues:{remember:!0},onFinish:function(e){return m.apply(this,arguments)},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(_e.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}]},r.a.createElement(De.a,null)),r.a.createElement(_e.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(De.a.Password,null)),r.a.createElement(_e.a.Item,pt,r.a.createElement(B.a,{type:"primary",htmlType:"submit"},"Submit")))))},gt=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(qe.g)().jwt;function s(){return(s=Object(p.a)(h.a.mark((function e(t){var n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,st(c,t);case 3:n=e.sent,a=n.data,r=n.status,console.log("data: ".concat(a,", status: ").concat(r)),200===r&&(console.log("should redirect"),o(!0));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(c),n?r.a.createElement(qe.a,{to:"/"}):r.a.createElement(at,null,r.a.createElement(nt,null,r.a.createElement(_e.a,{layout:"vertical",onFinish:function(e){return s.apply(this,arguments)},onFinishFailed:function(e){console.log("finish failed called!")}},r.a.createElement(_e.a.Item,{label:"Password",name:"password",hasFeedback:!0,rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(De.a.Password,null)),r.a.createElement(_e.a.Item,{label:"Confirm password",name:"Confirm password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please input your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(De.a.Password,null)),r.a.createElement(B.a,{type:"primary",htmlType:"submit"},"Submit"))))},bt=function(e){var t=u(),n=t.manager!=('"/employee"'===JSON.stringify(e.path));return t.isAuth&&n?r.a.createElement(qe.b,{path:e.path},e.children):r.a.createElement(qe.a,{to:"/login"})},yt=function(){u();var e=d();function t(e,t){return n.apply(this,arguments)}function n(){return(n=Object(p.a)(h.a.mark((function e(t,n){var a,r,o,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={refresh:t},e.next=3,fetch("".concat(v,"/token/myrefresh/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),signal:n.signal});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.next=9,r.status;case 9:return c=e.sent,e.abrupt("return",{data:o,status:c});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var n=new AbortController;function a(){return(a=Object(p.a)(h.a.mark((function a(){var r,o,c,i;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==localStorage.getItem("refreshToken")){a.next=4;break}e({isAuth:!1,manager:!1}),a.next=12;break;case 4:return r=localStorage.getItem("refreshToken"),e({isAuth:!0,manager:!1}),a.next=8,t(r,n);case 8:o=a.sent,c=o.data,i=o.status,e(200===i?{isAuth:!0,manager:c.manager}:{isAuth:!1,manager:!1});case 12:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){n.abort()}}),[]),r.a.createElement(g.a,null,r.a.createElement(qe.d,null,r.a.createElement(qe.b,{path:"/register"},r.a.createElement(mt,null)),r.a.createElement(qe.b,{path:"/login"},r.a.createElement(vt,null)),r.a.createElement(bt,{path:"/manager"},r.a.createElement(Ve,null)),r.a.createElement(bt,{path:"/employee"},r.a.createElement(Ze,null)),r.a.createElement(qe.b,{path:"/reset-password/:jwt"},r.a.createElement(gt,null)),r.a.createElement(qe.b,{path:"/"},r.a.createElement(j,null))))};r.a.createContext({isAuth:!1,manager:!1});var Et=function(){return r.a.createElement("div",{className:"big-container"},r.a.createElement(f,null,r.a.createElement(yt,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Et,null),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[140,1,2]]]);
//# sourceMappingURL=main.b0e6cbd4.chunk.js.map